(function(){if(document.getElementById("__pi_arrow"))return;const KEY="__pi_overlay",SAFE=["src","href","alt","title","class","id"],ok=n=>SAFE.includes(n)||(n||"").startsWith("data-")||(n||"").startsWith("aria-");let state={edits:[],history:[]};try{state=JSON.parse(localStorage.getItem(KEY))||state}catch{}const sel=e=>{if(!e||e.nodeType!==1)return"";if(e.id)return"#"+CSS.escape(e.id);const p=[];let c=e;while(c&&c.nodeType===1){let n=c.nodeName.toLowerCase(),par=c.parentNode;if(par&&par.children){const sib=[...par.children].filter(x=>x.nodeName===c.nodeName);if(sib.length>1){const i=sib.indexOf(c);if(i>-1)n+=`:nth-of-type(${i+1})`}}p.unshift(n),c=par}return p.join(" > ")},up=r=>{const i=state.edits.findIndex(e=>e.selector===r.selector&&e.type===r.type&&e.name===r.name);i>-1?state.edits[i]=r:state.edits.push(r);state.history.push({...r,t:Date.now()})},apply=()=>{(state.edits||[]).forEach(e=>{try{const el=document.querySelector(e.selector);if(!el)return;if(/^html|body$/i.test(el.tagName))return;if("attr"===e.type&&ok(e.name))null==e.value?el.removeAttribute(e.name):el.setAttribute(e.name,e.value);else if("style"===e.type&&e.name)el.style[e.name]=e.value??""}catch{}})},obs=new MutationObserver(m=>{m.forEach(x=>{if("attributes"===x.type&&1===(x.target?.nodeType)){const a=x.attributeName;if("style"===a){(x.target.getAttribute("style")||"").split(";").forEach(r=>{const[k,v]=(r||"").split(":").map(s=>s&&s.trim());if(k)up({type:"style",selector:sel(x.target),name:k,value:v||""})})}else a&&ok(a)&&up({type:"attr",selector:sel(x.target),name:a,value:x.target.getAttribute(a)})}})});function toast(t){const d=document.createElement("div");d.textContent=t;d.style.cssText="position:fixed;top:12px;left:50%;transform:translateX(-50%);background:#000c;color:#fff;padding:6px 10px;border-radius:8px;z-index:2147483647";document.body.appendChild(d);setTimeout(()=>d.remove(),900)}function save(){localStorage.setItem(KEY,JSON.stringify(state));if(stat)stat.textContent="Tracked edits: "+(state.edits||[]).length}const arrow=document.createElement("div");arrow.id="__pi_arrow";arrow.innerHTML="&#9654;";arrow.style.cssText="position:fixed;top:10px;right:10px;z-index:2147483647;padding:4px 6px;background:#0008;color:#fff;font-size:14px;border-radius:4px;cursor:pointer;filter:invert(1);";document.body.appendChild(arrow);let panelVisible=false,panel,stat;arrow.onclick=()=>{panelVisible=!panelVisible;if(panelVisible){if(!panel)createPanel();panel.style.display="block";arrow.innerHTML="&#9650;"}else{if(panel)panel.style.display="none";arrow.innerHTML="&#9654;";localStorage.removeItem('__pi_autoArrow')}};function createPanel(){panel=document.createElement("div");panel.id="__pi_panel";panel.style.cssText="position:fixed;top:30px;right:10px;z-index:2147483647;background:#111c;color:#fff;padding:8px;border-radius:10px;backdrop-filter:saturate(180%) blur(8px);font:12px system-ui";const title=document.createElement("div");title.textContent="Permanent Inspect";title.style.fontWeight="600";stat=document.createElement("div");stat.id="__pi_stat";stat.style.margin="6px 0";stat.textContent="Tracked edits: "+(state.edits||[]).length;const mk=(t,fn,sty)=>{const b=document.createElement("button");b.textContent=t;b.onclick=fn;b.style.cssText="margin:2px;padding:6px 8px;border-radius:8px;border:0;cursor:pointer;"+(sty||"background:#2b7;color:#000;");return b},bSave=mk("Save",()=>{save();toast("Saved")}),bReset=mk("Reset",()=>{if(confirm("Clear all edits?")){state={edits:[],history:[]};save();location.reload()}},"background:#ddd;color:#000;"),bExport=mk("Export",()=>{(navigator.clipboard?navigator.clipboard.writeText(localStorage.getItem(KEY)||"{}").then(()=>toast("Copied JSON")):Promise.reject()).catch(()=>alert(localStorage.getItem(KEY)||"{}"))},"background:#ddd;color:#000;"),bImport=mk("Import",()=>{const t=prompt("Paste JSON:");if(!t)return;try{const o=JSON.parse(t);state={edits:o.edits||[],history:o.history||[]};save();apply();toast("Imported")}catch{alert("Invalid JSON")}},"background:#ddd;color:#000;"),bPick=mk("Pick",()=>{let on=true;const hl=document.createElement("div");hl.style.cssText="position:fixed;border:2px solid #fc4;pointer-events:none;z-index:2147483646";document.body.appendChild(hl);function mm(e){const el=document.elementFromPoint(e.clientX,e.clientY);if(!el)return;const r=el.getBoundingClientRect();hl.style.left=r.left+"px";hl.style.top=r.top+"px";hl.style.width=r.width+"px";hl.style.height=r.height+"px"}function click(e){e.preventDefault();e.stopPropagation();on=false;document.removeEventListener("mousemove",mm,true);document.removeEventListener("click",click,true);hl.remove();const el=document.elementFromPoint(e.clientX,e.clientY);if(!el)return;const sl=sel(el),mode=prompt("Edit 'style' or 'attr'?","style");if(!mode)return;if("style"===mode.toLowerCase()){const prop=prompt("CSS property:");if(!prop)return;const val=prompt("Value:","");el.style[prop]=val||"";up({type:"style",selector:sl,name:prop,value:val||""});save();apply()}else{const name=prompt("Attribute name:");if(!name
